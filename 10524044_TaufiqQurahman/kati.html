<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GadgetZone - Toko Elektronik Modern</title>
  <style>
    /* ===== VARIABEL & RESET ===== */
    :root {
      --primary: #2e86de;
      --primary-dark: #1b4f72;
      --secondary: #ff9f43;
      --light: #f5f6fa;
      --dark: #2f3640;
      --success: #4cd137;
      --danger: #e84118;
      --radius: 8px;
      --shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
    }
    
    /* ===== LAYOUT ===== */
    .container {
      display: grid;
      grid-template-areas:
        "header header header"
        "menu menu menu"
        "left content right"
        "footer footer footer";
      grid-template-columns: 200px 1fr 200px;
      grid-template-rows: auto auto 1fr auto;
      min-height: 100vh;
      gap: 15px;
      padding: 15px;
    }
    
    @media (max-width: 768px) {
      .container {
        grid-template-areas:
          "header header header"
          "menu menu menu"
          "content content content"
          "left left left"
          "right right right"
          "footer footer footer";
        grid-template-columns: 1fr;
      }
    }
    
    header {
      grid-area: header;
      background-color: var(--primary);
      color: white;
      padding: 20px;
      text-align: center;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    nav {
      grid-area: menu;
      background-color: var(--primary-dark);
      padding: 10px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    nav ul {
      display: flex;
      justify-content: center;
      list-style: none;
      gap: 20px;
    }
    
    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: var(--radius);
      transition: all 0.3s ease;
    }
    
    nav a:hover {
      background-color: var(--primary);
    }
    
    .left-sidebar {
      grid-area: left;
      background-color: white;
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    .right-sidebar {
      grid-area: right;
      background-color: white;
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    main {
      grid-area: content;
      background-color: white;
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    footer {
      grid-area: footer;
      background-color: var(--primary);
      color: white;
      text-align: center;
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    /* ===== KOMPONEN UMUM ===== */
    .marquee {
      background-color: var(--secondary);
      color: var(--dark);
      padding: 10px;
      margin: 10px 0;
      font-weight: bold;
      border-radius: var(--radius);
      overflow: hidden;
    }
    
    .marquee-content {
      display: inline-block;
      white-space: nowrap;
      animation: marquee 15s linear infinite;
    }
    
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    
    .btn {
      display: inline-block;
      background-color: var(--primary);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: bold;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }
    
    .btn-danger {
      background-color: var(--danger);
    }
    
    .btn-success {
      background-color: var(--success);
    }
    
    .card {
      background-color: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    
    .card-body {
      padding: 15px;
    }
    
    /* ===== HALAMAN PRODUK ===== */
    .products-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .product-title {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: var(--primary);
    }
    
    .product-price {
      font-weight: bold;
      color: var(--secondary);
      margin-bottom: 10px;
    }
    
    /* ===== FORM TRANSAKSI ===== */
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .form-control {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: var(--radius);
    }
    
    /* ===== INVOICE ===== */
    .invoice {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 30px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    
    .invoice-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .invoice-details {
      margin-bottom: 30px;
    }
    
    .invoice-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    
    .invoice-table th, 
    .invoice-table td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: left;
    }
    
    .invoice-table th {
      background-color: var(--primary);
      color: white;
    }
    
    .invoice-total {
      text-align: right;
      font-size: 1.2rem;
      font-weight: bold;
    }
    
    /* ===== KONTAK KAMI ===== */
    .profile {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    
    .profile-img {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 20px;
      border: 5px solid var(--primary);
    }
    
    .profile-info {
      margin-top: 20px;
    }
    
    .profile-info p {
      margin-bottom: 10px;
    }
    
    /* ===== UTILITY ===== */
    .hidden {
      display: none !important;
    }
    
    .text-center {
      text-align: center;
    }
    
    .mt-3 {
      margin-top: 15px;
    }
    
    .mb-3 {
      margin-bottom: 15px;
    }
    
    .p-3 {
      padding: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>GadgetZone</h1>
      <p>Toko Elektronik Modern Terpercaya</p>
    </header>
    
    <nav>
      <ul>
        <li><a href="#" class="nav-link" data-page="home">Beranda</a></li>
        <li><a href="#" class="nav-link" data-page="products">Produk</a></li>
        <li><a href="#" class="nav-link" data-page="transaction">Transaksi</a></li>
        <li><a href="#" class="nav-link" data-page="invoice">Invoice</a></li>
        <li><a href="#" class="nav-link" data-page="contact">Kontak Kami</a></li>
        <li><a href="#" class="nav-link" data-page="about">Tentang Kami</a></li>
      </ul>
    </nav>
    
    <aside class="left-sidebar">
      <h3>Kategori Produk</h3>
      <ul>
        <li><a href="#" class="category" data-category="smartphone">Smartphone</a></li>
        <li><a href="#" class="category" data-category="laptop">Laptop</a></li>
        <li><a href="#" class="category" data-category="tablet">Tablet</a></li>
        <li><a href="#" class="category" data-category="aksesoris">Aksesoris</a></li>
      </ul>
      
      <h3 class="mt-3">Promo Spesial</h3>
      <div class="card mt-3">
        <img src="Screenshot (83).png" alt="Promo Produk">
        <div class="card-body">
          <p>Diskon hingga 50% untuk produk terpilih!</p>
        </div>
      </div>
    </aside>
    
    <main id="main-content">
      <!-- Halaman Beranda (Default) -->
      <section id="home-page">
        <div class="marquee">
          <div class="marquee-content">
            ðŸŽ‰ Promo Spesial Hari Ini! Gratis Ongkir untuk Pembelian di Atas Rp 1.000.000 ðŸŽ‰ &nbsp;&nbsp;&nbsp; 
            ðŸ’³ Pembayaran dengan QRIS Diskon 5% ðŸ’³ &nbsp;&nbsp;&nbsp;
            ðŸ“± Garansi Resmi 1 Tahun untuk Semua Produk ðŸ“±
          </div>
        </div>
        
        <h2>Selamat Datang di GadgetZone</h2>
        <p>Toko elektronik terpercaya dengan produk berkualitas dan harga terjangkau. Kami menyediakan berbagai macam produk elektronik mulai dari smartphone, laptop, tablet, hingga aksesoris dengan garansi resmi.</p>
        
        <h3 class="mt-3">Produk Terbaru</h3>
        <div class="products-container">
          <div class="card">
            <img src="Screenshot (54).png" alt="Smartphone X100">
            <div class="card-body">
              <h4 class="product-title">Smartphone X100</h4>
              <p class="product-price">Rp 5.999.000</p>
              <p>Smartphone flagship dengan kamera 108MP dan baterai 5000mAh</p>
              <a href="#" class="btn btn-buy" data-id="1">Beli Sekarang</a>
            </div>
          </div>
          
          <div class="card">
            <img src="Screenshot (55).png" alt="Laptop UltraBook">
            <div class="card-body">
              <h4 class="product-title">Laptop UltraBook</h4>
              <p class="product-price">Rp 12.499.000</p>
              <p>Laptop tipis dengan prosesor i7 generasi terbaru dan SSD 1TB</p>
              <a href="#" class="btn btn-buy" data-id="2">Beli Sekarang</a>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Halaman Produk -->
      <section id="products-page" class="hidden">
        <h2>Daftar Produk</h2>
        <div class="marquee">
          <div class="marquee-content">
            ðŸ”¥ Diskon Akhir Tahun! Hanya sampai 31 Desember 2023 ðŸ”¥ &nbsp;&nbsp;&nbsp;
            ðŸšš Gratis Ongkir ke Seluruh Indonesia ðŸšš
          </div>
        </div>
        
        <div class="products-container" id="products-list">
          <!-- Produk akan dimuat via JavaScript -->
        </div>
      </section>
      
      <!-- Halaman Transaksi -->
      <section id="transaction-page" class="hidden">
        <h2>Formulir Transaksi</h2>
        <form id="transaction-form">
          <div class="form-group">
            <label for="customer-name">Nama Lengkap</label>
            <input type="text" id="customer-name" class="form-control" required>
          </div>
          
          <div class="form-group">
            <label for="customer-email">Email</label>
            <input type="email" id="customer-email" class="form-control" required>
          </div>
          
          <div class="form-group">
            <label for="customer-phone">No. HP</label>
            <input type="tel" id="customer-phone" class="form-control" required>
          </div>
          
          <div class="form-group">
            <label for="customer-address">Alamat Lengkap</label>
            <textarea id="customer-address" class="form-control" rows="3" required></textarea>
          </div>
          
          <div class="form-group">
            <label for="product-select">Pilih Produk</label>
            <select id="product-select" class="form-control" required>
              <option value="">-- Pilih Produk --</option>
              <!-- Produk akan dimuat via JavaScript -->
            </select>
          </div>
          
          <div class="form-group">
            <label for="product-quantity">Jumlah</label>
            <input type="number" id="product-quantity" class="form-control" min="1" value="1" required>
          </div>
          
          <div class="form-group">
            <label for="payment-method">Metode Pembayaran</label>
            <select id="payment-method" class="form-control" required>
              <option value="">-- Pilih Metode --</option>
              <option value="transfer">Transfer Bank</option>
              <option value="qris">QRIS</option>
              <option value="cod">COD (Bayar di Tempat)</option>
            </select>
          </div>
          
          <button type="submit" class="btn btn-success">Proses Transaksi</button>
        </form>
      </section>
      
      <!-- Halaman Invoice -->
      <section id="invoice-page" class="hidden">
        <div class="invoice">
          <div class="invoice-header">
            <h2>GadgetZone</h2>
            <p>Toko Elektronik Modern</p>
            <p>Jl. Teknologi No. 123, Jakarta</p>
            <p>Telp: (021) 12345678</p>
          </div>
          
          <div class="invoice-details">
            <h3>INVOICE</h3>
            <p>No. Invoice: <span id="invoice-number">INV-20230001</span></p>
            <p>Tanggal: <span id="invoice-date">01 Desember 2023</span></p>
          </div>
          
          <div class="customer-details">
            <h4>Data Pelanggan</h4>
            <p>Nama: <span id="invoice-customer-name">-</span></p>
            <p>Email: <span id="invoice-customer-email">-</span></p>
            <p>No. HP: <span id="invoice-customer-phone">-</span></p>
            <p>Alamat: <span id="invoice-customer-address">-</span></p>
          </div>
          
          <table class="invoice-table">
            <thead>
              <tr>
                <th>No</th>
                <th>Produk</th>
                <th>Harga</th>
                <th>Jumlah</th>
                <th>Subtotal</th>
              </tr>
            </thead>
            <tbody id="invoice-items">
              <!-- Item akan dimuat via JavaScript -->
            </tbody>
            <tfoot>
              <tr>
                <td colspan="4" class="text-right"><strong>Total</strong></td>
                <td><strong id="invoice-total">Rp 0</strong></td>
              </tr>
            </tfoot>
          </table>
          
          <div class="payment-method">
            <h4>Metode Pembayaran</h4>
            <p id="invoice-payment-method">-</p>
          </div>
          
          <div class="invoice-footer mt-3">
            <p>Terima kasih telah berbelanja di GadgetZone</p>
            <p>Barang yang sudah dibeli tidak dapat dikembalikan</p>
          </div>
          
          <button id="print-invoice" class="btn mt-3">Cetak Invoice</button>
          <button id="new-transaction" class="btn btn-success mt-3">Transaksi Baru</button>
        </div>
      </section>
      
      <!-- Halaman Kontak Kami -->
      <section id="contact-page" class="hidden">
        <h2>Kontak Kami</h2>
        
        <div class="profile">
          <img src="foto sendiri.jpg" alt="" class="profile-img">
          
          <div class="profile-info">
            <h3>Biodata Mahasiswa</h3>
            <p><strong>NIM:</strong> 123456789</p>
            <p><strong>Nama:</strong> Taufiq Qurahman</p>
            <p><strong>Kelas:</strong> SI-05</p>
            <p><strong>Program Studi:</strong> Sistem Informasi</p>
            <p><strong>Email:</strong> taufiq@student.university.ac.id</p>
            <p><strong>No. HP:</strong> 0812-3456-7890</p>
          </div>
        </div>
        
        <div class="mt-3">
          <h3>Hubungi Kami</h3>
          <p><strong>Alamat:</strong> Jl. Teknologi No. 123, Jakarta</p>
          <p><strong>Email:</strong> info@gadgetzone.id</p>
          <p><strong>Telepon:</strong> (021) 12345678</p>
          <p><strong>WhatsApp:</strong> 0812-3456-7890</p>
        </div>
      </section>
      
      <!-- Halaman Tentang Kami -->
      <section id="about-page" class="hidden">
        <h2>Tentang GadgetZone</h2>
        
        <div class="card">
          <img src="logo gambar.png" alt="Toko GadgetZone">
          <div class="card-body">
            <p>GadgetZone adalah toko elektronik modern yang menyediakan berbagai produk teknologi seperti smartphone, laptop, dan aksesoris. Kami berdiri sejak tahun 2020 dan terus berkomitmen memberikan pelayanan terbaik serta produk berkualitas dengan harga terjangkau.</p>
            
            <h3 class="mt-3">Visi</h3>
            <p>Menjadi toko elektronik terdepan dalam menyediakan produk teknologi berkualitas dengan pelayanan terbaik di Indonesia.</p>
            
            <h3 class="mt-3">Misi</h3>
            <ul>
              <li>Menyediakan produk teknologi terbaru dengan kualitas terjamin</li>
              <li>Memberikan harga kompetitif dan terjangkau</li>
              <li>Memberikan pelayanan pelanggan yang ramah dan profesional</li>
              <li>Memberikan garansi dan after-sales service yang terpercaya</li>
            </ul>
            
            <h3 class="mt-3">Tim Kami</h3>
            <p>GadgetZone dikelola oleh tim profesional yang berpengalaman di bidang teknologi dan retail elektronik. Kami siap membantu Anda menemukan produk yang sesuai dengan kebutuhan dan budget Anda.</p>
          </div>
        </div>
      </section>
    </main>
    
    <aside class="right-sidebar">
      <h3>Keranjang Belanja</h3>
      <div id="cart-items">
        <p>Keranjang belanja kosong</p>
      </div>
      <div id="cart-total" class="mt-3">
        <p><strong>Total:</strong> Rp 0</p>
      </div>
      <button id="checkout-btn" class="btn btn-success w-100 mt-3" disabled>Checkout</button>
      
      <h3 class="mt-3">Status Pesanan</h3>
      <div class="card mt-3">
        <div class="card-body">
          <p>Masukkan no. invoice untuk cek status pesanan</p>
          <input type="text" class="form-control mt-3" placeholder="No. Invoice">
          <button class="btn mt-3 w-100">Cek Status</button>
        </div>
      </div>
    </aside>
    
    <footer>
      <p>&copy; 2023 GadgetZone - Toko Elektronik Modern</p>
      <p>Dibuat oleh Taufiq Qurahman untuk Ujian Akhir Semester Komputer Aplikasi Teknologi Informasi</p>
    </footer>
  </div>

  <script>
    // Data Produk
    const products = [
      { id: 1, name: "Smartphone X100", price: 5999000, category: "smartphone", image: "Screenshot (54).png", description: "Smartphone flagship dengan kamera 108MP dan baterai 5000mAh" },
      { id: 2, name: "Laptop UltraBook", price: 12499000, category: "laptop", image: "Screenshot (55).png", description: "Laptop tipis dengan prosesor i7 generasi terbaru dan SSD 1TB" },
      { id: 3, name: "Tablet Pro 11", price: 7999000, category: "tablet", image: "Screenshot (56).png", description: "Tablet dengan layar 11 inci dan stylus pen untuk produktivitas" },
      { id: 4, name: "Smart Watch 3", price: 2499000, category: "aksesoris", image: "Screenshot (79).png", description: "Smartwatch dengan fitur kesehatan dan notifikasi smartphone" },
      { id: 5, name: "Wireless Earbuds", price: 1499000, category: "aksesoris", image: "Screenshot (80).png", description: "Earbuds nirkabel dengan noise cancellation dan baterai tahan lama" },
      { id: 6, name: "Power Bank 20000mAh", price: 499000, category: "aksesoris", image: "Screenshot (81).png", description: "Power bank kapasitas besar dengan fast charging" }
    ];

    // Data Keranjang
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let currentTransaction = JSON.parse(localStorage.getItem('currentTransaction')) || null;

    // DOM Elements
    const mainContent = document.getElementById('main-content');
    const pages = document.querySelectorAll('main section');
    const navLinks = document.querySelectorAll('.nav-link');
    const categoryLinks = document.querySelectorAll('.category');
    const productsList = document.getElementById('products-list');
    const productSelect = document.getElementById('product-select');
    const transactionForm = document.getElementById('transaction-form');
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const checkoutBtn = document.getElementById('checkout-btn');

    // Fungsi untuk menampilkan halaman
    function showPage(pageId) {
      pages.forEach(page => {
        page.classList.add('hidden');
      });
      document.getElementById(pageId).classList.remove('hidden');
    }

    // Fungsi untuk memuat produk
    function loadProducts(category = 'all') {
      productsList.innerHTML = '';
      
      const filteredProducts = category === 'all' 
        ? products 
        : products.filter(product => product.category === category);
      
      if (filteredProducts.length === 0) {
        productsList.innerHTML = '<p>Tidak ada produk dalam kategori ini</p>';
        return;
      }
      
      filteredProducts.forEach(product => {
        const productElement = document.createElement('div');
        productElement.className = 'card';
        productElement.innerHTML = `
          <img src="${product.image}" alt="${product.name}">
          <div class="card-body">
            <h4 class="product-title">${product.name}</h4>
            <p class="product-price">Rp ${product.price.toLocaleString('id-ID')}</p>
            <p>${product.description}</p>
            <button class="btn btn-buy" data-id="${product.id}">Beli Sekarang</button>
            <button class="btn btn-add-to-cart" data-id="${product.id}">Tambah ke Keranjang</button>
          </div>
        `;
        productsList.appendChild(productElement);
      });
      
      // Isi dropdown produk di form transaksi
      productSelect.innerHTML = '<option value="">-- Pilih Produk --</option>';
      products.forEach(product => {
        const option = document.createElement('option');
        option.value = product.id;
        option.textContent = `${product.name} - Rp ${product.price.toLocaleString('id-ID')}`;
        productSelect.appendChild(option);
      });
    }

    // Fungsi untuk memperbarui keranjang
    function updateCart() {
      if (cart.length === 0) {
        cartItems.innerHTML = '<p>Keranjang belanja kosong</p>';
        cartTotal.innerHTML = '<p><strong>Total:</strong> Rp 0</p>';
        checkoutBtn.disabled = true;
        return;
      }
      
      cartItems.innerHTML = '';
      let total = 0;
      
      cart.forEach((item, index) => {
        const product = products.find(p => p.id === item.productId);
        total += product.price * item.quantity;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
          <p><strong>${product.name}</strong></p>
          <p>Rp ${product.price.toLocaleString('id-ID')} x ${item.quantity}</p>
          <button class="btn btn-danger btn-sm btn-remove-from-cart" data-index="${index}">Hapus</button>
        `;
        cartItems.appendChild(cartItem);
      });
      
      cartTotal.innerHTML = `<p><strong>Total:</strong> Rp ${total.toLocaleString('id-ID')}</p>`;
      checkoutBtn.disabled = false;
      
      // Simpan keranjang ke localStorage
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Fungsi untuk membuat invoice
    function generateInvoice(transactionData) {
      const now = new Date();
      const invoiceNumber = `INV-${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2, '0')}${now.getDate().toString().padStart(2, '0')}${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`;
      
      const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const invoiceDate = now.toLocaleDateString('id-ID', dateOptions);
      
      // Hitung total
      let subtotal = 0;
      const invoiceItems = transactionData.items.map(item => {
        const product = products.find(p => p.id === item.productId);
        const itemTotal = product.price * item.quantity;
        subtotal += itemTotal;
        
        return {
          name: product.name,
          price: product.price,
          quantity: item.quantity,
          total: itemTotal
        };
      });
      
      // Simpan transaksi saat ini
      currentTransaction = {
        invoiceNumber,
        invoiceDate,
        customer: transactionData.customer,
        items: transactionData.items,
        paymentMethod: transactionData.paymentMethod,
        total: subtotal
      };
      
      localStorage.setItem('currentTransaction', JSON.stringify(currentTransaction));
      
      // Tampilkan invoice
      document.getElementById('invoice-number').textContent = invoiceNumber;
      document.getElementById('invoice-date').textContent = invoiceDate;
      
      document.getElementById('invoice-customer-name').textContent = transactionData.customer.name;
      document.getElementById('invoice-customer-email').textContent = transactionData.customer.email;
      document.getElementById('invoice-customer-phone').textContent = transactionData.customer.phone;
      document.getElementById('invoice-customer-address').textContent = transactionData.customer.address;
      
      const invoiceItemsTable = document.getElementById('invoice-items');
      invoiceItemsTable.innerHTML = '';
      
      invoiceItems.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${index + 1}</td>
          <td>${item.name}</td>
          <td>Rp ${item.price.toLocaleString('id-ID')}</td>
          <td>${item.quantity}</td>
          <td>Rp ${item.total.toLocaleString('id-ID')}</td>
        `;
        invoiceItemsTable.appendChild(row);
      });
      
      document.getElementById('invoice-total').textContent = `Rp ${subtotal.toLocaleString('id-ID')}`;
      
      let paymentMethodText = '';
      switch(transactionData.paymentMethod) {
        case 'transfer':
          paymentMethodText = 'Transfer Bank (BCA 1234567890 a.n GadgetZone)';
          break;
        case 'qris':
          paymentMethodText = 'QRIS (Scan kode QR yang akan dikirim via WhatsApp)';
          break;
        case 'cod':
          paymentMethodText = 'COD (Bayar di Tempat saat barang diterima)';
          break;
        default:
          paymentMethodText = transactionData.paymentMethod;
      }
      
      document.getElementById('invoice-payment-method').textContent = paymentMethodText;
      
      // Kosongkan keranjang
      cart = [];
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
      
      // Tampilkan halaman invoice
      showPage('invoice-page');
    }

    // Event Listeners
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const pageId = `${link.dataset.page}-page`;
        showPage(pageId);
        
        // Jika halaman produk, muat produk
        if (pageId === 'products-page') {
          loadProducts();
        }
      });
    });

    categoryLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        loadProducts(link.dataset.category);
      });
    });

    // Event delegation untuk tombol beli dan tambah ke keranjang
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('btn-buy')) {
        const productId = parseInt(e.target.dataset.id);
        const product = products.find(p => p.id === productId);
        
        // Kosongkan keranjang dan tambahkan produk yang dipilih
        cart = [{ productId, quantity: 1 }];
        updateCart();
        
        // Isi form transaksi
        document.getElementById('product-select').value = productId;
        showPage('transaction-page');
      }
      
      if (e.target.classList.contains('btn-add-to-cart')) {
        const productId = parseInt(e.target.dataset.id);
        const existingItem = cart.find(item => item.productId === productId);
        
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ productId, quantity: 1 });
        }
        
        updateCart();
        alert('Produk telah ditambahkan ke keranjang');
      }
      
      if (e.target.classList.contains('btn-remove-from-cart')) {
        const index = parseInt(e.target.dataset.index);
        cart.splice(index, 1);
        updateCart();
      }
    });

    // Form transaksi
    transactionForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const productId = parseInt(productSelect.value);
      const quantity = parseInt(document.getElementById('product-quantity').value);
      
      // Validasi
      if (!productId || quantity < 1) {
        alert('Silakan pilih produk dan masukkan jumlah yang valid');
        return;
      }
      
      const transactionData = {
        customer: {
          name: document.getElementById('customer-name').value,
          email: document.getElementById('customer-email').value,
          phone: document.getElementById('customer-phone').value,
          address: document.getElementById('customer-address').value
        },
        items: cart.length > 0 ? cart : [{ productId, quantity }],
        paymentMethod: document.getElementById('payment-method').value
      };
      
      generateInvoice(transactionData);
    });

    // Tombol cetak invoice
    document.getElementById('print-invoice').addEventListener('click', () => {
      window.print();
    });

    // Tombol transaksi baru
    document.getElementById('new-transaction').addEventListener('click', () => {
      showPage('products-page');
    });

    // Tombol checkout dari sidebar
    checkoutBtn.addEventListener('click', () => {
      if (cart.length > 0) {
        showPage('transaction-page');
      }
    });

    // Muat data saat halaman dimuat
    document.addEventListener('DOMContentLoaded', () => {
      loadProducts();
      updateCart();
      
      // Jika ada transaksi sebelumnya, tampilkan
      if (currentTransaction) {
        showPage('invoice-page');
      } else {
        showPage('home-page');
      }
    });
  </script>
</body>
</html>